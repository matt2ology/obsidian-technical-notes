# Django Tutorial for Beginners - 10 - Filtering Database Results

Week 14.6 | Saturday, April 08, 2023 | 11:45 PM

Related : [thenewboston-django-tutorial-for-beginners](thenewboston-django-tutorial-for-beginners.md) - [09 - Database API](09%20-%20Database%20API.md)
Source : <https://youtu.be/GalTlEsOBdo>

## Filtering Database Results

Shows the number of objects in our database

```python
Album.objects.all()
```

Instead of getting messages like so

```text
>>> Album.objects.all()

[<Album: Album object>,<Album: Album object>]
```

We leverage (override) the dunder method : `__str__(self):`
Be sure to restart the shell `python manage.py shell` after exiting.

Results in database can be filtered by
- `id` - generated by Django automatically according to entry input
- class/table attribute and search type : `attributeName__startswith=""`
    - Example : `Album.objects.filter(artist__startswith='Taylor'`

## Example : The App "music" `models.py`

```python
# website\music\models.py
from django.db import models

class Album(models.Model):
    """
    Album model that has the following attributes:
    `artist`, `album_title`, `genre`, and `album_logo`.
    """
    # The primary key is automatically created by Django and is called id.
    # But we can also create our own primary key by adding the following line:
    # `id = models.AutoField(primary_key=True)`
    artist = models.CharField(max_length=250)
    album_title = models.CharField(max_length=500)
    genre = models.CharField(max_length=250)
    # URL to album logo image file
    album_logo = models.CharField(max_length=1000)

    def __str__(self):
        """This is what will be displayed in the admin page
        for each album object created in the database
        (instead of Album object (1), Album object (2), etc.)

        Returns:
            [string] -- [artist name - album title]
        """
        return self.album_title + ' - ' + self.artist


class Song(models.Model):
    """
    Song model that is linked to an album model via a
    foreign key relationship (one to many) and has the following attributes:
    `file_type`, `song_title`, and `is_favorite` (boolean).
    """
    # on_delete=models.CASCADE means that if the album is deleted, all songs
    # associated with that album will be deleted as well (cascading delete)
    # foreign key relationship (one to many) with Album model
    # (one album can have many songs)
    album = models.ForeignKey(Album, on_delete=models.CASCADE)
    file_type = models.CharField(max_length=10)  # mp3, wav, etc.
    song_title = models.CharField(max_length=250)
    is_favorite = models.BooleanField(default=False)

    def __str__(self):
        """This is what will be displayed in the admin page
        for each song object created in the database
        (instead of Song object (1), Song object (2), etc.)

        Returns:
            [string] -- [song title]
        """
        return self.song_title
```
